; Allocate some memory on the stack
sub rsp, 0x3000

loop:

; Read an address from stdin.
mov rax, 0
mov rdi, 0
lea rsi, [rsp+0x80]
mov rdx, 8
syscall

; Copy 0x1000 bytes from the specified address to the stack.
mov rsi, [rsi]
lea rdi, [rsp+0x2000]
mov rcx, 0x1000
rep movsb

; Write the copied bytes on the stack to stdout.
mov rax, 1
mov rdi, 1
lea rsi, [rsp+0x2000]
mov rdx, 0x1000
syscall

; Repeat
jmp loop